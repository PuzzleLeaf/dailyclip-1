<!DOCTYPE html>
<html lang="ko">
<head>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta property="og:title" content="DAILY CLIP">
<meta property="og:description" content="앱에 대한 설명 들어갈 자리">
<meta property="og:image" content="">
<meta property="og:url" content="">
<link rel="stylesheet" href="css/common.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />
<title>DAILY CLIP</title>
<script src="https://www.gstatic.com/firebasejs/4.4.0/firebase.js"></script>
<script src="https://code.jquery.com/jquery-latest.min.js" ></script>
<script>
	//Initialize Firebase
	// 파이어베이스 접근 설정
	var config = {
	  apiKey: "AIzaSyBlRXKU6mf9KGW1cqUNThHuQu825qKd0MA",
	  authDomain: "dailyclip-b64d3.firebaseapp.com",
	  databaseURL: "https://dailyclip-b64d3.firebaseio.com",
	  projectId: "dailyclip-b64d3",
	  storageBucket: "dailyclip-b64d3.appspot.com",
	  messagingSenderId: "753746341919"
	};
	
	firebase.initializeApp(config);
	
	var database = firebase.database();
	var databaseRef = firebase.database().ref('list/');				//list 참조
	var userEmail;
	
	firebase.auth().onAuthStateChanged(function(user) {
	 	if(user){
	 		userEmail = user.email;
	 		fnLinkLoad(user.uid); //사용자 고유의 아이디를 사용한다.
	 	}
	});
	
	
	var articleNum = 0;					//클립 갯수
	var articleText = "";				//article html 
	

	//해당 유저의 모든 클립 출력
	function fnLinkLoad(userID){
		databaseRef.child(userID).on('value', snapshot => {
			snapshot.forEach(function(childSnapshot){

					++articleNum;
					articleText += "<div class='article'><div class='img_thumb'></div>";
					articleText += "<div class='content'>";
					articleText += "<h2 class='title_article' id='title_article" + articleNum + "'>";
					articleText	+= childSnapshot.val().title + "<h2>";
					articleText += "<p class='content_article' id='content_article" + articleNum + "'>";
					articleText += childSnapshot.val().description + "</p>";
					articleText += "<div class='source_area'>";
					articleText += "<span class='date_article' id='date_article" + articleNum + "'>";
					articleText += childSnapshot.val().savedDate + "</span>";
					articleText += "<span class='addr_article' id='addr_article" + articleNum + "'>";
					articleText += childSnapshot.val().url + "</span></div>";
					articleText += "<span class='chk_list'><a href='#'><img src='images/chk_list.png' alt=''></a></span>";
					articleText += "</div></div>";
				
			})
			$('.section').html(articleText);	
					//section에 추가
		});
	}

</script>
</head>
<body >
<div id="wrap">
	<div id="list">
		<div class="list_area">
			<div class="top_menu">
				<h1>DAILYCLIP</h1>
				<span class="btn_prev"><img src="images/btn_prev.png" alt=""></span>
				<span class="btn_search"><img src="images/btn_search.png" alt=""></span>
			</div>
			<div class="section">
			</div>
			<div class="bottom_menu">
				<ul class="icon_bottom">
					<li class="home"><a href="#"><img src="images/btn_home.png" alt=""></a></li>
					<li class="bookmark"><a href="#"><img src="images/btn_bookmark.png" alt=""></a></li>
					<li class="folder"><a href="#"><img src="images/btn_folder.png" alt=""></a></li>
					<li class="setting"><a href="#"><img src="images/btn_setting.png" alt=""></a></li>
				</ul>
			</div>
			<div class="add_article">
			</div>
		</div>
	</div>
</div>
</body>
</html>